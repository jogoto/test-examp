# –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ Docker Plugin –≤ Jenkins

## –°—Ç—ä–ø–∫–∏ –∑–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ

### 1. –û—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ Plugin Manager
1. –í–ª–µ–∑—Ç–µ –≤ Jenkins dashboard
2. –û—Ç–∏–¥–µ—Ç–µ –≤ **Manage Jenkins** ‚Üí **Manage Plugins**
3. –ö–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ —Ç–∞–±–∞ **Available**

### 2. –¢—ä—Ä—Å–µ–Ω–µ –Ω–∞ Docker Plugins
–í –ø–æ–ª–µ—Ç–æ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –Ω–∞–ø–∏—à–µ—Ç–µ "Docker" –∏ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ —Å–ª–µ–¥–Ω–∏—Ç–µ plugins:

#### –û—Å–Ω–æ–≤–Ω–∏ Docker Plugins:
- ‚úÖ **Docker Pipeline** (–Ω–∞–π-–≤–∞–∂–µ–Ω –∑–∞ Jenkinsfile)
- ‚úÖ **Docker plugin** (–æ—Å–Ω–æ–≤–µ–Ω Docker plugin)
- ‚úÖ **Docker API Plugin**
- ‚úÖ **docker-build-step**

### 3. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ
1. –ü–æ—Å—Ç–∞–≤–µ—Ç–µ –æ—Ç–º–µ—Ç–∫–∏ –≤ –∫–≤–∞–¥—Ä–∞—Ç—á–µ—Ç–∞—Ç–∞ –ø—Ä–µ–¥ –∏–∑–±—Ä–∞–Ω–∏—Ç–µ plugins
2. –ö–ª–∏–∫–Ω–µ—Ç–µ **Install without restart**
3. –ò–∑—á–∞–∫–∞–π—Ç–µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ—Ç–æ –¥–∞ –∑–∞–≤—ä—Ä—à–∏

### 4. –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ Jenkins
1. –û—Ç–∏–¥–µ—Ç–µ –≤ **Manage Jenkins** ‚Üí **Manage Plugins**
2. –ö–ª–∏–∫–Ω–µ—Ç–µ **Restart Jenkins when no jobs are running**
3. –ò–∑—á–∞–∫–∞–π—Ç–µ Jenkins –¥–∞ —Å–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è—Ç–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ System Information
1. –û—Ç–∏–¥–µ—Ç–µ –≤ **Manage Jenkins** ‚Üí **System Information**
2. –¢—ä—Ä—Å–µ—Ç–µ –∑–∞ Docker-related –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
3. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–º–∞ Docker-related —Å–∏—Å—Ç–µ–º–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Docker –ø—Ä–∞–≤–∞
–ò–∑–ø—ä–ª–Ω–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥–∏ –Ω–∞ Jenkins server:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ Docker –µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω
docker --version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–ª–∏ jenkins –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –µ –≤ docker –≥—Ä—É–ø–∞—Ç–∞
groups jenkins

# –ê–∫–æ –Ω–µ –µ –≤ –≥—Ä—É–ø–∞—Ç–∞, –¥–æ–±–∞–≤–µ—Ç–µ –≥–æ:
sudo usermod -aG docker jenkins

# –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ Jenkins service
sudo systemctl restart jenkins
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ Jenkins

### 1. Docker Cloud Configuration (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)
1. –û—Ç–∏–¥–µ—Ç–µ –≤ **Manage Jenkins** ‚Üí **Configure System**
2. –ù–∞–º–µ—Ä–µ—Ç–µ —Å–µ–∫—Ü–∏—è—Ç–∞ **Cloud**
3. –î–æ–±–∞–≤–µ—Ç–µ **Docker** cloud configuration
4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ Docker host URI (–æ–±–∏–∫–Ω–æ–≤–µ–Ω–æ `unix:///var/run/docker.sock`)

### 2. –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ Docker —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç
–°–ª–µ–¥ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ—Ç–æ, –º–æ–∂–µ—Ç–µ –¥–∞ —Ç–µ—Å—Ç–≤–∞—Ç–µ –¥–∞–ª–∏ Docker —Ä–∞–±–æ—Ç–∏:

1. –°—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤ Pipeline job
2. –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ —Å–ª–µ–¥–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∫–æ–¥:

```groovy
pipeline {
    agent {
        docker {
            image 'hello-world'
        }
    }
    stages {
        stage('Test Docker') {
            steps {
                sh 'docker --version'
                sh 'echo "Docker —Ä–∞–±–æ—Ç–∏ —É—Å–ø–µ—à–Ω–æ!"'
            }
        }
    }
}
```

## –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ Jenkinsfile

–°–ª–µ–¥ —É—Å–ø–µ—à–Ω–æ—Ç–æ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ Docker plugin, –º–æ–∂–µ—Ç–µ –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è Jenkinsfile:

```bash
# –í Jenkins job –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞:
Script Path: Jenkinsfile
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º: "Invalid agent type 'docker'"
**–†–µ—à–µ–Ω–∏–µ:** Docker Pipeline plugin –Ω–µ –µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω

### –ü—Ä–æ–±–ª–µ–º: "Cannot connect to the Docker daemon"
**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ Docker service —Ä–∞–±–æ—Ç–∏: `sudo systemctl status docker`
2. –î–æ–±–∞–≤–µ—Ç–µ jenkins –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è –≤ docker –≥—Ä—É–ø–∞—Ç–∞
3. –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ Jenkins

### –ü—Ä–æ–±–ª–µ–º: "Permission denied"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ jenkins –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è
sudo chmod 666 /var/run/docker.sock
# –ò–ª–∏ –ø–æ-–¥–æ–±—Ä–µ, –¥–æ–±–∞–≤–µ—Ç–µ jenkins –≤ docker –≥—Ä—É–ø–∞—Ç–∞
sudo usermod -aG docker jenkins
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞ Docker Agent

1. **–ò–∑–æ–ª–∏—Ä–∞–Ω–∏ —Å—Ä–µ–¥–∏** - –≤—Å–µ–∫–∏ build —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –≤ —á–∏—Å—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
2. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç** - —Å—ä—â–∞—Ç–∞ —Å—Ä–µ–¥–∞ –∑–∞ –≤—Å–∏—á–∫–∏ builds
3. **–õ–µ—Å–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –Ω—è–º–∞ –Ω—É–∂–¥–∞ –æ—Ç –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ .NET –Ω–∞ Jenkins server
4. **–°–∫–∞–ª–∏—Ä—É–µ–º–æ—Å—Ç** - –º–æ–∂–µ—Ç–µ –¥–∞ –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ builds –ø–∞—Ä–∞–ª–µ–ª–Ω–æ

## –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏

–°–ª–µ–¥ —É—Å–ø–µ—à–Ω–æ—Ç–æ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ –Ω–∞ Docker plugin:

1. –°—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤ Pipeline job –≤ Jenkins
2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–π—Ç–µ Git repository
3. –ò–∑–±–µ—Ä–µ—Ç–µ `Jenkinsfile` –∫–∞—Ç–æ Script Path
4. –ê–∫—Ç–∏–≤–∏—Ä–∞–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ push –≤ main branch
5. –¢–µ—Å—Ç–≤–∞–π—Ç–µ pipeline-–∞

üéâ –£—Å–ø–µ—Ö —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ç–∞! 